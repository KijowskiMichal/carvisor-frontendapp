<app-leftpanel></app-leftpanel>
<div class="main">
  <div class="searchBar">
    <div class="inputWrapper">
      <i class="far fa-calendar-alt"></i>
      <input type="date" [(ngModel)]="dateToValue" (change)="list(1)">
    </div>
    <div class="inputDivider">
      -
    </div>
    <div class="inputWrapper">
      <i class="far fa-calendar-alt"></i>
      <input type="date" [(ngModel)]="dateFromValue" (change)="list(1)">
    </div>
  </div>

  <div id="no-data" *ngIf="!Notifications">
    Brak powiadomień w danym przedziale czasowym.
  </div>

  <div id="table">
    <table *ngIf="Notifications">
      <tr id="firstRow">
        <td class="col-notification">
          Powiadomienie
        </td>
        <td>Kierowca</td>
        <td>Czas</td>
        <td>Lokalizacja</td>
      </tr>
      <tr *ngFor="let notification of Notifications.listOfNotification">
        <td>
          <div [ngClass]="{'alert-pink':notification.type === 'SPEEDING', 'alert-yellow':notification.type === 'LEAVING_THE_ZONE', 'alert-green':notification.type === 'placeholder'}">
            <i [ngClass]="{'far fa-ban':notification.type === 'SPEEDING', 'far fa-info-circle':notification.type === 'LEAVING_THE_ZONE', 'far fa-shield-check':notification.type === 'placeholder'}"></i>
            <span *ngIf="notification.type === 'SPEEDING'">
              Przekroczenie dozwolonej prędkości o {{notification.value}} km/h.
            </span>
            <span *ngIf="notification.type === 'LEAVING_THE_ZONE'">
              Pojazd wyjechał ze strefy o {{notification.value}} m.
            </span>
          </div>
        </td>
        <td>
          <div class="driver">
            <div>
              <div class="name">
                {{notification.userName}}
              </div>
              <div class="vehicle">
                {{notification.deviceLicensePlate}}
              </div>
            </div>
          </div>
        </td>
        <td>{{notification.date | date:'dd.MM.yyyy HH:mm'}}</td>
        <td>{{notification.location}}</td>
      </tr>
    </table>
  </div>

  <div id="pages">
    <div id="pagesWrapper" *ngIf="Notifications">
      <i [ngClass]="page>1 ? '' : 'disableLink'" (click)="list(1)" class="far fa-chevron-double-left"></i>
      <i [ngClass]="page>1 ? '' : 'disableLink'" (click)="list(this.page-1)" class="far fa-chevron-left"></i>
      <div id="pagesText">
        strona {{page}} z {{pageMax}}
      </div>
      <i [ngClass]="page==pageMax ? 'disableLink' : ''" (click)="list(this.page+1)"  class="far fa-chevron-right"></i>
      <i [ngClass]="page==pageMax ? 'disableLink' : ''" (click)="list(this.pageMax)"  class="far fa-chevron-double-right"></i>
    </div>
  </div>

</div>
