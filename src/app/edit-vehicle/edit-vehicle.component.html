<app-leftpanel></app-leftpanel>
<div class="popup" *ngIf="popupOk" >
  <div class="popup-title">
    Komunikat
  </div>
  <div class="popup-line"></div>
  <div class="popup-text">
    Pomyślnie zaktualizowano pojazd.
  </div>
  <div class="popup-footer">
    <div class="popup-green" (click)="popupOk=false" [routerLink]="['/vehicles']">
      Ok
    </div>
  </div>
</div>
<div [ngClass]="popupOk==true ? 'shutItDown' : ''"></div>
<div class="popup" *ngIf="popupFail" >
  <div class="popup-title">
    Error
  </div>
  <div class="popup-line"></div>
  <div class="popup-text">
    Wystąpił błąd.
  </div>
  <div class="popup-footer">
    <div class="popup-green" (click)="popupFail=false">
      Ok
    </div>
  </div>
</div>
<div [ngClass]="popupFail==true ? 'shutItDown' : ''"></div>
<div id="editUser" *ngIf="deviceInfo && configuration">
  <div id="content">
    <div class="panel">
      <div class="title">
        <i class="far fa-car"></i>
        Dane pojazdu
      </div>
      <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>
      <div class="logo" [ngStyle]="{'background-image': 'url('+deviceInfo.image+')'}">
        <div (click)="fileInput.click()">
          <i class="far fa-pen"></i>
          Edytuj zdjęcie
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-car"></i>
          <input type="text" placeholder="Numer rejestracyjny" pattern="^[A-Za-z0-9]{4,7}" title="Litery i cyfry od 4 do 7 znaków." value="{{deviceInfo.licensePlate}}" #licensePlate>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-car"></i>
          <input type="text" placeholder="Marka" pattern="^[A-Za-zżźćńółęąśŻŹĆĄŚĘŁÓŃ ]{2,30}" title="Tylko litery, od 2 do 30 znaków." value="{{deviceInfo.brand}}" #brand>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-car"></i>
          <input type="text" placeholder="Model" pattern="^[A-Za-zżźćńółęąśŻŹĆĄŚĘŁÓŃ ]{2,30}" title="Tylko litery, od 2 do 30 znaków." value="{{deviceInfo.model}}" #model>
        </div>
      </div>
      <div class="smallTitle">
        <i class="far fa-calendar-alt"></i>
        Godziny pracy:
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <div class="inputWrapper2">
            <input type="text" placeholder="od" pattern="^([0-1]?[0-9]|2[0-3]):[0-5][0-9]" title="Godzina w formacie gg:mm." value="{{deviceInfo.timeFrom}}" #timeFrom>
          </div>
          <div class="inputDivider">
            -
          </div>
          <div class="inputWrapper2">
            <input type="text" placeholder="do" pattern="^([0-1]?[0-9]|2[0-3]):[0-5][0-9]" title="Godzina w formacie gg:mm." value="{{deviceInfo.timeTo}}" #timeTo>
          </div>
        </div>
      </div>
    </div>
    <div class="panel2">
      <div class="smallTitle">
        Interwał wysyłania danych:
      </div>
      <div class="editContent">
        <div class="comboBoxWrapper">
          <select #sendInterval>
            <option value="-1" [selected]="configuration.sendInterval == -1">Globalne</option>
            <option value="15" [selected]="configuration.sendInterval == 15">15 sekund</option>
            <option value="30" [selected]="configuration.sendInterval == 30">30 sekund</option>
            <option value="60" [selected]="configuration.sendInterval == 60">1 minuta</option>
            <option value="180" [selected]="configuration.sendInterval == 180">3 minuty</option>
            <option value="300" [selected]="configuration.sendInterval == 300">5 minut</option>
          </select>
          <i class="fal fa-chevron-down"></i>
        </div>
      </div>
      <div class="smallTitle">
        Interwał wysyłania lokalizacji:
      </div>
      <div class="editContent">
        <div class="comboBoxWrapper">
          <select #locationInterval>
            <option value="-1" [selected]="configuration.locationInterval == -1">Globalne</option>
            <option value="5" [selected]="configuration.locationInterval == 5">5 sekund</option>
            <option value="10" [selected]="configuration.locationInterval == 10">10 sekund</option>
            <option value="15" [selected]="configuration.locationInterval == 15">15 sekund</option>
            <option value="0" [selected]="configuration.locationInterval == 0">Automatycznie</option>
          </select>
          <i class="fal fa-chevron-down"></i>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-calendar-alt"></i>
          <input type="text" placeholder="Rok produkcji" pattern="^[1-2][0-9]{3}" title="Rok produkcji." value="{{deviceInfo.yearOfProduction}}" #yearOfProduction>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-car"></i>
          <input type="text" placeholder="Silnik" pattern="^[A-Za-z0-9żźćńółęąśŻŹĆĄŚĘŁÓŃ .,:;]{2,30}" title="Opis silnika." value="{{deviceInfo.engine}}" #engine>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-gas-pump"></i>
          <input type="text" placeholder="Wielkość zbiornika" pattern="^[0-9]{0,5}(\.[0-9]{0,5})?" title="Wielkość zbiornika." value="{{deviceInfo.tank}}" #tank>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-gas-pump"></i>
          <input type="text" placeholder="Typ paliwa" pattern="^[A-Za-z0-9żźćńółęąśŻŹĆĄŚĘŁÓŃ .,:;]{2,15}" title="Typ paliwa." value="{{deviceInfo.fuel}}" #fuel>
        </div>
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-tachometer"></i>
          <input type="text" placeholder="Norma spalania" pattern="^[0-9]{0,3}(\.[0-9]{0,5})?" title="Wielkość zbiornika." value="{{deviceInfo.norm}}" #norm>
        </div>
      </div>
    </div>
    <div class="panel">
      <div class="title">
        <i class="far fa-map-marker-alt"></i>
        Strefy
      </div>
      <div class="editContent">
        <div class="inputWrapper">
          <i class="far fa-search"></i>
          <input type="text" placeholder="Szukaj">
        </div>
      </div>
    </div>
  </div>
  <div id="buttons">
    <div id="acceptButton" (click)="sendData(timeFrom.value, licensePlate.value, timeTo.value, engine.value, fuel.value, yearOfProduction.value, model.value, tank.value, brand.value, norm.value, sendInterval.value, locationInterval.value)">
      Aktualizuj
    </div>
    <a [routerLink]="['/vehicles']">
      <div id="cancelButton">
        Anuluj
      </div>
    </a>
    <div id="deleteButton">
      Usuń
    </div>
  </div>
</div>
